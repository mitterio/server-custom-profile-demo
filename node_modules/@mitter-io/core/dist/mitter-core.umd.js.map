{"version":3,"file":"mitter-core.umd.js","sources":["../src/MitterApiGateway.ts","../node_modules/restyped-axios/index.ts","../src/services/common.ts","../src/services/constants.ts","../src/services/ChannelsClient.ts","../src/services/MessagesClient.ts","../src/services/UsersClient.ts","../src/services/UserTokensClient.ts","../src/MitterClientSet.ts","../src/utils/response-utils.ts","../src/utils/StatefulPromise.ts","../src/utils/index.ts","../src/driver-host/MessagingPipelineDriverHost.ts","../src/models/named-entities.ts","../src/auth/user-interceptors.ts","../src/objects/mitter-objects.ts","../src/objects/Users.ts","../src/Mitter.ts","../src/specs/MessagingPipelineDriver.ts","../src/models/type-matchers/pipeline-payloads.ts"],"sourcesContent":["import { GenericInterceptor } from './auth/interceptors-base'\nimport axios, {\n    AxiosError,\n    AxiosInstance,\n    AxiosInterceptorManager,\n    AxiosRequestConfig,\n    AxiosResponse\n} from 'axios'\n\nexport class MitterAxiosApiInterceptor {\n    // tslint:disable-next-line:variable-name\n    private mitterAxiosRequestInterceptor: AxiosInterceptorManager<AxiosRequestConfig> =\n        axios.interceptors.request\n    private mitterAxiosResponseInterceptor: AxiosInterceptorManager<AxiosResponse> =\n        axios.interceptors.response\n\n    constructor(\n        private applicationId: string | undefined,\n        private genericInterceptor: GenericInterceptor,\n        private mitterApiBaseUrl: string\n    ) {}\n\n    requestInterceptor(config: AxiosRequestConfig) {\n        if (this.interceptFilter(config!!.baseURL!!)) {\n            this.genericInterceptor({\n                data: config.data,\n                path: config.url!!,\n                headers: config.headers,\n                method: config.method!!\n            })\n\n            return config\n        }\n        return config\n    }\n\n    responseInterceptor(response: AxiosResponse<any>) {\n        if (this.interceptFilter(response!!.config!!.url!!)) {\n            return response\n        } else {\n            return response\n        }\n    }\n\n    responseErrorInterceptor(error: AxiosError) {\n        /*\n        if (error!!.response!!.status === 401 && error.code === 'claim_rejected') {\n            if (this.onTokenExpireExecutor !== undefined) {\n                this.onTokenExpireExecutor()\n            }\n        }\n        */\n\n        return Promise.reject(error)\n    }\n\n    enable(axiosInstance?: AxiosInstance) {\n        if (axiosInstance !== undefined) {\n            axiosInstance.interceptors.request.use((config: AxiosRequestConfig) =>\n                this.requestInterceptor(config)\n            )\n            axiosInstance.interceptors.response.use(\n                (response: AxiosResponse<any>) => this.responseInterceptor(response),\n                (error: AxiosError) => this.responseErrorInterceptor(error)\n            )\n        } else {\n            this.mitterAxiosRequestInterceptor.use((config: AxiosRequestConfig) =>\n                this.requestInterceptor(config)\n            )\n            this.mitterAxiosResponseInterceptor.use(\n                (response: AxiosResponse<any>) => this.responseInterceptor(response),\n                (error: AxiosError) => this.responseErrorInterceptor(error)\n            )\n        }\n    }\n\n    disable(axiosInstance?: AxiosInstance) {\n        if (axiosInstance !== undefined) {\n            axiosInstance.interceptors.request.eject(3)\n            axiosInstance.interceptors.response.eject(3)\n        } else {\n            this.mitterAxiosRequestInterceptor.eject(1)\n            this.mitterAxiosResponseInterceptor.eject(2)\n        }\n    }\n\n    private interceptFilter(url: string): boolean {\n        return url.startsWith(this.mitterApiBaseUrl)\n    }\n}\n",{"errno":-2,"code":"ENOENT","syscall":"open","path":"/builds/mitter-io/mitter-ts-core/node_modules/restyped-axios/index.ts"},"import { AxiosInstance } from 'axios'\nimport { Mitter, MitterAxiosInterceptionHost } from '../Mitter'\nimport axios from 'restyped-axios'\n\nexport function clientGenerator<T>() {\n    return (mitterAxiosInterceptionHost: MitterAxiosInterceptionHost) => {\n        const client = axios.create<T>({\n            baseURL: mitterAxiosInterceptionHost.mitterApiBaseUrl\n        })\n\n        mitterAxiosInterceptionHost.enableAxiosInterceptor(client as AxiosInstance)\n        return client\n    }\n}\n","// tslint:disable-next-line:variable-name\nexport let MitterConstants = {\n    // MitterApiUrl: 'https://api.mitter.io',\n    MitterApiUrl: 'https://api.mitter.io',\n    MitterApiStagingUrl: 'https://api.staging.mitter.io',\n\n    Api: {\n        VersionPrefix: '/v1'\n    }\n}\n","import { TypedAxiosInstance } from 'restyped-axios'\nimport { Identifiable } from '../models/base-types'\nimport { clientGenerator } from './common'\nimport { MitterAxiosInterceptionHost } from '../Mitter'\nimport { MitterConstants } from './constants'\nimport { ParticipatedChannel, Channel, ChannelParticipation } from '@mitter-io/models'\n\nconst base = `${MitterConstants.Api.VersionPrefix}/channels`\n\nexport const ChannelsPaths = {\n    GetParticipatedChannelsForMe: `${MitterConstants.Api.VersionPrefix}/users/me/channels`,\n    GetParticipatedChannels: `${MitterConstants.Api.VersionPrefix}/users/:userId/channels`,\n    GetChannels: `${base}`,\n    GetChannelsById: `${base}/:channelId`\n}\n\nexport interface ChannelsApi {\n    '/v1/users/me/channels': {\n        GET: {\n            response: ParticipatedChannel[]\n        }\n        query: {\n            after?: string\n            before?: string\n            limit?: number\n        }\n    }\n\n    '/v1/users/:userId/channels': {\n        GET: {\n            response: ParticipatedChannel[]\n        }\n    }\n\n    '/v1/channels/:channelId': {\n        GET: {\n            params: {\n                channelId: string\n            }\n            response: Channel\n        }\n\n        DELETE: {\n            params: {\n                channelId: string\n            }\n            response: {}\n        }\n    }\n\n    '/v1/channels': {\n        GET: {\n            response: Channel[]\n        }\n\n        POST: {\n            response: Identifiable<string> | Channel\n            body: Channel\n        }\n    }\n\n    '/v1/channels/:channelId/participants': {\n        GET: {\n            params: {\n                channelId: string\n            }\n        }\n        POST: {\n            params: {\n                channelId: string\n            }\n            response: {}\n        }\n    }\n\n    '/v1/channels/:channelId/participants/:participantId': {\n        DELETE: {\n            params: {\n                channelId: string\n                participantId: string\n            }\n            response: {}\n        }\n    }\n\n    '/v1/channels/:channelId/messages': {\n        DELETE: {\n            params: {\n                channelId: string\n            }\n            response: {}\n        }\n    }\n}\n\nexport const channelsClientGenerator = clientGenerator<ChannelsApi>()\n\nexport class ChannelsClient {\n    private channelsAxiosClient: TypedAxiosInstance<ChannelsApi>\n\n    constructor(private mitterAxiosInterceptionHost: MitterAxiosInterceptionHost) {\n        this.channelsAxiosClient = channelsClientGenerator(mitterAxiosInterceptionHost)\n    }\n\n    public newChannel(channel: Channel): Promise<Identifiable<string> | Channel> {\n        return this.channelsAxiosClient\n            .post<'/v1/channels'>('/v1/channels', channel)\n            .then(x => x.data)\n    }\n\n    public getAllChannels(\n        before: string | undefined = undefined,\n        after: string | undefined = undefined,\n        limit: number = 45\n    ): Promise<Channel[]> {\n        return this.channelsAxiosClient\n            .get<'/v1/channels'>('/v1/channels', {\n                params: Object.assign(\n                    {},\n                    after !== undefined ? { after } : {},\n                    before !== undefined ? { before } : {},\n                    limit !== undefined ? { limit } : {}\n                )\n            })\n            .then(x => x.data)\n    }\n\n    public getChannel(channelId: string): Promise<Channel> {\n        return this.channelsAxiosClient\n            .get<'/v1/channels/:channelId'>(`/v1/channels/${channelId}`)\n            .then(x => x.data)\n    }\n\n    public participatedChannels(): Promise<ParticipatedChannel[]> {\n        return this.channelsAxiosClient\n            .get<'/v1/users/me/channels'>('/v1/users/me/channels')\n            .then(x => x.data)\n    }\n\n    public deleteChannel(channelId: string): Promise<{}> {\n        return this.channelsAxiosClient\n            .delete<'/v1/channels/:channelId'>(`/v1/channels/${channelId}`)\n            .then(x => x.data)\n    }\n\n    public getChannelParticipants(channelId: string): Promise<ChannelParticipation[]> {\n        return this.channelsAxiosClient\n            .get<'/v1/channels/:channelId/participants'>(`/v1/channels/${channelId}/participants`)\n            .then(x => x.data)\n    }\n\n    public addParticipantToChannel(\n        channelId: string,\n        channelParticipation: ChannelParticipation\n    ): Promise<{}> {\n        return this.channelsAxiosClient\n            .post<'/v1/channels/:channelId/participants'>(\n                `/v1/channels/${channelId}/participants`,\n                channelParticipation\n            )\n            .then(x => x.data)\n    }\n\n    public deleteParticipantFromChannel(channelId: string, participantId: string): Promise<{}> {\n        return this.channelsAxiosClient\n            .delete<'/v1/channels/:channelId/participants/:participantId'>(\n                `/v1/channels/${channelId}/participants/${participantId}`\n            )\n            .then(x => x.data)\n    }\n\n    public deleteAllMessages(channelId: string): Promise<{}> {\n        return this.channelsAxiosClient\n            .delete<'/v1/channels/:channelId/messages'>(`v1/channels/${channelId}/messages`)\n            .then(x => x.data)\n    }\n}\n","import {\n    ChannelReferencingMessage,\n    Message,\n    MessageTimelineEvent,\n    TimelineEvent\n} from '@mitter-io/models'\nimport { TypedAxiosInstance } from 'restyped-axios'\nimport { MitterAxiosInterceptionHost } from '../Mitter'\nimport { clientGenerator } from './common'\nimport { MitterConstants } from './constants'\n\nconst base = `${MitterConstants.Api.VersionPrefix}/messages`\n\nexport const MessagesPaths = {\n    GetMessageById: `${base}/:messageId`,\n    GetMessageInChannel: `${MitterConstants.Api.VersionPrefix}/channels/:channelId/messages`,\n    PostMessageToChannel: `${MitterConstants.Api.VersionPrefix}/channels/:channelId/messages`\n}\n\nexport interface MessagesApi {\n    '/v1/messages/:messageId': {\n        GET: {\n            params: {\n                messageId: string\n            }\n\n            response: Message\n        }\n    }\n\n    '/v1/channels/:channelId/messages': {\n        GET: {\n            params: {\n                channelId: string\n            }\n\n            query: {\n                after?: string\n                before?: string\n                limit?: number\n            }\n\n            response: ChannelReferencingMessage[]\n        }\n\n        POST: {\n            params: {\n                channelId: string\n            }\n\n            body: Message\n        }\n    }\n\n    '/v1/channels/:channelId/messages/:messageIds/timeline': {\n        GET: {\n            params: {\n                channelId: string\n                messageIds: string\n            }\n            response: MessageTimelineEvent[]\n        }\n\n        POST: {\n            params: {\n                channelId: string\n                messageIds: string\n            }\n            body: TimelineEvent\n\n            response: {}\n        }\n    }\n\n    '/v1/channels/:channelId/messages/:messageIds': {\n        DELETE: {\n            params: {\n                channelId: string\n                messageIds: string\n            }\n        }\n    }\n}\n\nexport const messagesClientGenerator = clientGenerator<MessagesApi>()\n\nexport class MessagesClient {\n    private messagesAxiosClient: TypedAxiosInstance<MessagesApi>\n\n    constructor(private mitterAxiosInterceptionHost: MitterAxiosInterceptionHost) {\n        this.messagesAxiosClient = messagesClientGenerator(mitterAxiosInterceptionHost)\n    }\n\n    public sendMessage(channelId: string, message: Message): Promise<Message> {\n        return this.messagesAxiosClient\n            .post<'/v1/channels/:channelId/messages'>(\n                `/v1/channels/${encodeURIComponent(channelId)}/messages`,\n                message\n            )\n            .then(x => x.data)\n    }\n\n    public getMessage(messageId: string): Promise<Message> {\n        return this.messagesAxiosClient\n            .get<'/v1/messages/:messageId'>(`/v1/messages/${messageId}`)\n            .then(x => x.data)\n    }\n\n    public getMessages(\n        channelId: string,\n        before: string | undefined = undefined,\n        after: string | undefined = undefined,\n        limit: number = 45\n    ): Promise<ChannelReferencingMessage[]> {\n        return this.messagesAxiosClient\n            .get<'/v1/channels/:channelId/messages'>(`/v1/channels/${channelId}/messages`, {\n                params: Object.assign(\n                    {},\n                    after !== undefined ? { after } : {},\n                    before !== undefined ? { before } : {},\n                    limit !== undefined ? { limit } : {}\n                )\n            })\n            .then(x => x.data)\n    }\n\n    public getMessageTimelineEvent(\n        channelId: string,\n        messageIds: string\n    ): Promise<MessageTimelineEvent[]> {\n        return this.messagesAxiosClient\n            .get<'/v1/channels/:channelId/messages/:messageIds/timeline'>(\n                `/v1/channels/${channelId}/messages/${messageIds}/timeline`\n            )\n            .then(x => x.data)\n    }\n\n    public addMessageTimelineEvent(\n        channelId: string,\n        messageIds: string,\n        timelineEvent: TimelineEvent\n    ) {\n        return this.messagesAxiosClient\n            .post<'/v1/channels/:channelId/messages/:messageIds/timeline'>(\n                `/v1/channels/${channelId}/messages/${messageIds}/timeline`,\n                timelineEvent\n            )\n            .then(x => x.data)\n    }\n\n    public deleteMessages(channelId: string, messageIds: string): Promise<void> {\n        return this.messagesAxiosClient\n            .delete<'/v1/channels/:channelId/messages/:messageIds'>(\n                `v1/channels/${channelId}/messages/${messageIds}`\n            )\n            .then(x => x.data)\n    }\n}\n","import { DeliveryEndpoint, User, UserLocator } from '@mitter-io/models'\nimport { Presence } from '@mitter-io/models/dist/types/user/Presence'\nimport { TypedAxiosInstance } from 'restyped-axios'\nimport { MitterAxiosInterceptionHost } from '../Mitter'\nimport { clientGenerator } from './common'\nimport { MitterConstants } from './constants'\n\nconst base = `${MitterConstants.Api.VersionPrefix}/users`\n\nexport const UsersPaths = {\n    GetMe: `${base}/me`,\n    GetUser: `${base}/:userId`,\n    GetMyScreenName: `${base}/me/screenname`,\n    GetUsersScreenName: `${base}/:userIds/screenname`\n}\n\nexport interface UsersApi {\n    '/v1/users/me': {\n        GET: {\n            response: User\n        }\n    }\n\n    '/v1/users/:userId': {\n        GET: {\n            params: {\n                userId: string\n            }\n\n            response: User\n        }\n    }\n\n    '/v1/users': {\n        GET: {\n            params: {\n                sandboxed: boolean\n            }\n            response: User[]\n        }\n        POST: {\n            response: {\n                identifier: string\n            }\n\n            body: User\n        }\n    }\n\n    '/v1/users/:userId/presence': {\n        GET: {\n            response: Presence\n        }\n        POST: {\n            body: Presence\n            response: {}\n        }\n    }\n\n    '/v1/users/:userId/locators': {\n        POST: {\n            body: UserLocator\n        }\n    }\n\n    '/v1/users/me/tokens': {\n        GET: {\n            response: void\n        }\n    }\n\n    '/v1/users/me/delivery-endpoints': {\n        POST: {\n            body: DeliveryEndpoint\n            response: DeliveryEndpoint\n        }\n        DELETE: {\n            body: DeliveryEndpoint['serializedEndpoint']\n            response: void\n        }\n    }\n}\n\nexport const usersClientGenerator = clientGenerator<UsersApi>()\n\nexport class UsersClient {\n    private usersAxiosClient: TypedAxiosInstance<UsersApi>\n\n    constructor(private mitterAxiosInterceptionHost: MitterAxiosInterceptionHost) {\n        this.usersAxiosClient = usersClientGenerator(mitterAxiosInterceptionHost)\n    }\n\n    createUser(user: User): Promise<{ identifier: string }> {\n        return this.usersAxiosClient.post<'/v1/users'>('/v1/users', user).then(x => x.data)\n    }\n\n    getUsers(locators: string[] | undefined = undefined): Promise<User[]> {\n        return this.usersAxiosClient\n            .get<'/v1/users'>('/v1/users', {\n                params: Object.assign(\n                    {},\n                    locators === undefined ? { sandboxed: true } : {},\n                    locators !== undefined ? { locators } : {}\n                )\n            })\n            .then(x => x.data)\n    }\n\n    getUser(userId: string): Promise<User> {\n        return this.usersAxiosClient\n            .get<'/v1/users/:userId'>(`/v1/users/${userId}`)\n            .then(x => x.data)\n    }\n\n    setUserPresence(userId: string, userPresence: Presence): Promise<{}> {\n        return this.usersAxiosClient\n            .post<'/v1/users/:userId/presence'>(`/v1/users/${userId}/presence`, userPresence)\n            .then(x => x.data)\n    }\n\n    getUserPresence(userId: string): Promise<Presence> {\n        return this.usersAxiosClient\n            .get<'/v1/users/:userId/presence'>(`/v1/users/${userId}/presence`)\n            .then(x => x.data)\n    }\n\n    addUserLocator(userId: string, locator: UserLocator) {\n        return this.usersAxiosClient\n            .post<'/v1/users/:userId/locators'>(`/v1/users/${userId}/locators`, locator)\n            .then(x => x.data)\n    }\n\n    logout(): Promise<void> {\n        return this.usersAxiosClient\n            .get<'/v1/users/me/tokens'>(`/v1/users/me/logout`)\n            .then(x => x.data)\n    }\n\n    addUserDeliveryEndpoint(deliveryEndpoint: DeliveryEndpoint): Promise<DeliveryEndpoint> {\n        return this.usersAxiosClient\n            .post<'/v1/users/me/delivery-endpoints'>(\n                `/v1/users/me/delivery-endpoints`,\n                deliveryEndpoint\n            )\n            .then(x => x.data)\n    }\n\n    deleteUserDeliveryEndpoint(\n        serializedEndpoint: DeliveryEndpoint['serializedEndpoint']\n    ): Promise<void> {\n        return this.usersAxiosClient\n            .delete<'/v1/users/me/delivery-endpoints'>(\n                `/v1/users/me/delivery-endpoints/${serializedEndpoint}`\n            )\n            .then(x => x.data)\n    }\n}\n","import { TypedAxiosInstance } from 'restyped-axios'\nimport { MitterAxiosInterceptionHost } from '../Mitter'\nimport { clientGenerator } from './common'\nimport { MitterConstants } from './constants'\nimport { IssuedUserToken } from '@mitter-io/models'\n\nconst base = `${MitterConstants.Api.VersionPrefix}/users/:userId/tokens`\n\nexport const UserTokensPaths = {\n    GetMe: `${base}/me`,\n    GetUser: `${base}/:userId`,\n    GetMyScreenName: `${base}/me/screenname`,\n    GetUsersScreenName: `${base}/:userIds/screenname`\n}\n\nexport interface UserTokensApi {\n    '/v1/users/:userId/tokens': {\n        POST: {\n            params: {\n                userId: string\n            }\n\n            response: IssuedUserToken\n        }\n    }\n}\n\nexport const userTokensClientGenerator = clientGenerator<UserTokensApi>()\n\nexport class UserTokensClient {\n    private userTokensAxiosClient: TypedAxiosInstance<UserTokensApi>\n\n    constructor(private mitterAxiosInterceptionHost: MitterAxiosInterceptionHost) {\n        this.userTokensAxiosClient = userTokensClientGenerator(mitterAxiosInterceptionHost)\n    }\n\n    getUserToken(userId: string): Promise<IssuedUserToken> {\n        return this.userTokensAxiosClient\n            .post<'/v1/users/:userId/tokens'>(`/v1/users/${userId}/tokens`)\n            .then(x => x.data)\n    }\n}\n","import { MitterAxiosInterceptionHost } from './Mitter'\nimport { ChannelsClient, MessagesClient, UsersClient } from './services'\nimport { UserTokensClient } from './services/UserTokensClient'\n\nexport class MitterClientSet {\n    private cachedClients: { [clientName: string]: any } = {}\n\n    constructor(private mitterAxiosInterceptionHost: MitterAxiosInterceptionHost) {}\n\n    channels() {\n        return this.client(ChannelsClient)\n    }\n\n    messages() {\n        return this.client(MessagesClient)\n    }\n\n    users() {\n        return this.client(UsersClient)\n    }\n\n    userAuth() {\n        return this.client(UserTokensClient)\n    }\n\n    private client<T>(clientConstructor: {\n        new (mitterAxiosInterceptionHost: MitterAxiosInterceptionHost): T\n    }): T {\n        if (!(clientConstructor.name in this.cachedClients)) {\n            this.cachedClients[clientConstructor.name] = new clientConstructor(\n                this.mitterAxiosInterceptionHost\n            )\n        }\n\n        return this.cachedClients[clientConstructor.name] as T\n    }\n}\n","interface ResponseError extends Error {\n  response: Response\n}\n\nexport function checkStatus(response: Response): Response {\n  if (response.status >= 200 && response.status < 300) {\n    return response\n  }\n\n  const error: Error = new Error(response.statusText)\n  const errorResponse = { response: response }\n  const returnErrorResponse: ResponseError = { ...error, ...errorResponse }\n  throw returnErrorResponse\n}\n\nexport const parseJSON = (response: Response) => response.json()\n","export interface StatefulPromise<T> extends Promise<T> {\n    resolve(t?: T): void\n    reject(e: any): void\n    connect(promise: Promise<T>): void\n}\n\nexport function statefulPromise<T>() {\n    let _resolve: ((t?: T) => void) | undefined = undefined\n    let _reject: ((e: any) => void) | undefined = undefined\n\n    const promise = new Promise<T>((resolve, reject) => {\n        _resolve = resolve\n        _reject = reject\n    }) as StatefulPromise<T>\n\n    promise.resolve = _resolve!!\n    promise.reject = _reject!!\n    promise.connect = (outer: Promise<T>) => {\n        outer.then((t: T) => _resolve!!(t)).catch((e: any) => _reject!!(e))\n    }\n\n    return promise\n}\n","// tslint:disable-next-line:no-empty\nexport const noOp = () => {}\nexport * from './response-utils'\nexport * from './StatefulPromise'\n","import { DeliveryEndpoint, MessagingPipelinePayload } from '@mitter-io/models'\nimport MessagingPipelineDriver, {\n    BasePipelineSink,\n    PipelineDriverSpec,\n    PipelineSink\n} from './../specs/MessagingPipelineDriver'\nimport { KvStore, Mitter } from '../mitter-core'\nimport { noOp } from '../utils'\n\nexport type MessageSink = (payload: MessagingPipelinePayload) => void\n\nclass SavedDeliveryEndpoints {\n    constructor(public readonly deliveryEndpoints: { [driver: string]: DeliveryEndpoint } = {}) {}\n}\n\nexport class MessagingPipelineDriverHost {\n    // tslint:disable-next-line:variable-name\n    private static readonly StoreKeys = {\n        SavedDeliveryEndpoints: 'savedDeliveryEndpoints'\n    }\n\n    private savedDeliveryEndpoints: SavedDeliveryEndpoints = new SavedDeliveryEndpoints()\n    private pipelineDrivers: Array<MessagingPipelineDriver>\n    private subscriptions: Array<MessageSink> = []\n\n    constructor(\n        pipelineDrivers: Array<MessagingPipelineDriver> | MessagingPipelineDriver,\n        private mitterContext: Mitter,\n        private kvStore: KvStore | undefined = undefined,\n        private onAllPipelinesInitialized: (e?: any) => void = () => {}\n    ) {\n        if (pipelineDrivers instanceof Array) {\n            this.pipelineDrivers = pipelineDrivers\n        } else {\n            this.pipelineDrivers = [pipelineDrivers]\n        }\n\n        this.mitterContext.userAuthorizationAvailable(() => this.refresh())\n    }\n\n    public subscribe(messageSink: MessageSink) {\n        this.subscriptions.push(messageSink)\n    }\n\n    public refresh() {\n        this.loadStoredEndpoints().then(() =>\n            this.initializeMessagingPipelines()\n                .then(() => {\n                    this.onAllPipelinesInitialized()\n                })\n                .catch(e => {\n                    this.onAllPipelinesInitialized(e)\n                })\n        )\n    }\n\n    private async loadStoredEndpoints(): Promise<void> {\n        this.savedDeliveryEndpoints = new SavedDeliveryEndpoints()\n\n        if (this.kvStore === undefined) {\n            console.warn(\n                'You are not using a store for persisting delivery endpoints.' +\n                    ' This might cause your users to very quickly hit provisioning limits on their endpoints'\n            )\n\n            return\n        }\n\n        let savedDeliveryEndpoints = await this.kvStore.getItem<SavedDeliveryEndpoints>(\n            MessagingPipelineDriverHost.StoreKeys.SavedDeliveryEndpoints\n        )\n\n        if (savedDeliveryEndpoints !== undefined) {\n            this.savedDeliveryEndpoints = savedDeliveryEndpoints\n        }\n    }\n\n    private async initializeMessagingPipelines(): Promise<any> {\n        const pipelineInits: Promise<any>[] = []\n\n        await this.pipelineDrivers.forEach(async driver => {\n            let driverInitialized: Promise<boolean | void>\n            let driverSpec: PipelineDriverSpec\n\n            try {\n                let { initialized, pipelineDriverSpec } = await driver.initialize(\n                    this.mitterContext\n                )\n\n                driverInitialized = initialized\n                pipelineInits.push(driverInitialized)\n                driverSpec = pipelineDriverSpec\n            } catch (ex) {\n                console.log('Unable to initialize pipeline driver', ex)\n                throw ex\n            }\n\n            console.log(`Initializing pipeline driver '${driverSpec.name}'`)\n\n            let preProvisionPromise = Promise.resolve<DeliveryEndpoint | undefined>(undefined)\n\n            if (driverSpec.name in this.savedDeliveryEndpoints.deliveryEndpoints) {\n                preProvisionPromise = this.syncEndpoint(\n                    this.savedDeliveryEndpoints.deliveryEndpoints[driverSpec.name]\n                )\n                console.log(\n                    `Found an endpoint already present for ${\n                        driverSpec.name\n                    }. If invalid, it will be re-provisioned`\n                )\n            }\n\n            preProvisionPromise.then(syncedEndpoint => {\n                let operatingEndpoint: Promise<DeliveryEndpoint | undefined>\n\n                if (syncedEndpoint === undefined) {\n                    console.log('The endpoint on sync was determined to be invalid, refreshing')\n\n                    operatingEndpoint = driverInitialized\n                        .then(() => driver.getDeliveryEndpoint())\n                        .then(deliveryEndpoint => {\n                            if (deliveryEndpoint !== undefined) {\n                                this.registerEndpoint(driverSpec, deliveryEndpoint).then(\n                                    provisionedEndpoint => provisionedEndpoint\n                                )\n                            } else {\n                                return undefined\n                            }\n                        })\n                        .catch(e => {\n                            console.warn(\n                                `Could not instantiate pipeline driver ${driverSpec.name}`,\n                                e\n                            )\n                            throw e\n                        })\n                } else {\n                    console.log(\n                        'The endpoint on sync was determined to be valid. Continuing with the same'\n                    )\n                    operatingEndpoint = Promise.resolve(syncedEndpoint)\n                }\n\n                operatingEndpoint.then(endpoint => {\n                    if (endpoint !== undefined) {\n                        this.announceSinkForDriver(\n                            driver,\n                            endpoint,\n                            this.generatePipelineSink(driverSpec)\n                        )\n                    } else {\n                        if (driver.pipelineSinkChanged !== undefined) {\n                            driver.pipelineSinkChanged(\n                                this.generateStatelessPipelineSink(driverSpec)\n                            )\n                        }\n                    }\n                })\n            })\n        })\n\n        return Promise.all(pipelineInits)\n    }\n\n    private announceSinkForDriver(\n        driver: MessagingPipelineDriver,\n        endpoint: DeliveryEndpoint,\n        pipelineSink: PipelineSink\n    ) {\n        driver.endpointRegistered(pipelineSink, endpoint)\n\n        if (driver.pipelineSinkChanged !== undefined) {\n            driver.pipelineSinkChanged(pipelineSink)\n        }\n    }\n\n    private async syncEndpoint(\n        deliveryEndpoint: DeliveryEndpoint\n    ): Promise<DeliveryEndpoint | undefined> {\n        return fetch(\n            `${this.mitterContext.mitterApiBaseUrl}/v1/users/me/delivery-endpoints/${\n                deliveryEndpoint.serializedEndpoint\n            }`\n        )\n            .then((resp: Response) => {\n                return resp.json\n            })\n            .then((resp: any) => {\n                return resp as DeliveryEndpoint\n            })\n            .catch(() => {\n                return undefined\n            })\n    }\n\n    private registerEndpoint(\n        driverSpec: PipelineDriverSpec,\n        deliveryEndpoint: DeliveryEndpoint\n    ): Promise<DeliveryEndpoint> {\n        return fetch(`${this.mitterContext.mitterApiBaseUrl}/v1/users/me/delivery-endpoints`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(deliveryEndpoint)\n        })\n            .then(response => response.json)\n            .then((endpoint: any) => {\n                this.savedDeliveryEndpoints = new SavedDeliveryEndpoints(\n                    Object.assign({}, this.savedDeliveryEndpoints.deliveryEndpoints, {\n                        [driverSpec.name]: endpoint\n                    })\n                )\n\n                this.syncEndpointsToStore()\n                console.log('returning endpoint', endpoint)\n                return endpoint\n            })\n    }\n\n    private syncEndpointsToStore() {\n        if (this.kvStore === undefined) {\n            return\n        }\n\n        this.kvStore\n            .setItem(\n                MessagingPipelineDriverHost.StoreKeys.SavedDeliveryEndpoints,\n                this.savedDeliveryEndpoints\n            )\n            .catch(e => console.warn('Error syncing delivery endpoints to storage', e))\n    }\n\n    private generateStatelessPipelineSink(driverSpec: PipelineDriverSpec): BasePipelineSink {\n        return {\n            received: (payload: MessagingPipelinePayload) => {\n                this.consumeNewPayload(driverSpec, payload)\n            }\n        }\n    }\n\n    private generatePipelineSink(driverSpec: PipelineDriverSpec): PipelineSink {\n        return {\n            received: (payload: MessagingPipelinePayload) => {\n                this.consumeNewPayload(driverSpec, payload)\n            },\n\n            endpointInvalidated: (deliveryEndpoint: DeliveryEndpoint) => {\n                this.invalidateEndpoint(driverSpec, deliveryEndpoint)\n            },\n\n            authorizedUserUnavailable: noOp,\n\n            statusUpdate: noOp\n        }\n    }\n\n    private invalidateEndpoint(_: PipelineDriverSpec, __: DeliveryEndpoint) {\n        throw new Error('')\n    }\n\n    private consumeNewPayload(_: PipelineDriverSpec, payload: MessagingPipelinePayload) {\n        this.subscriptions.forEach(subscription => subscription(payload))\n    }\n}\n","export const StandardHeaders = {\n    UserAuthorizationHeader: 'X-Issued-Mitter-User-Authorization',\n    SudoUserAuthorizationHeader: 'X-Mitter-Sudo-User-Id',\n    ApplicationIdHeader: 'X-Mitter-Application-Id',\n    AccessKeyHeader: 'X-Mitter-Application-Access-Key',\n    AccessKeyAuthorizationHeader: 'Authorization'\n}\n","import { GenericInterceptor } from './interceptors-base'\nimport { StandardHeaders } from '../models/named-entities'\n\nexport class UserAuthorizationInterceptor {\n    constructor(\n        private readonly userAuthorizationFetcher: () => string | undefined,\n        private readonly applicationId: string | undefined = undefined\n    ) {}\n\n    getInterceptor(): GenericInterceptor {\n        return requestParams => {\n            if (!(StandardHeaders.UserAuthorizationHeader in requestParams.headers)) {\n                const userAuthorization = this.userAuthorizationFetcher()\n\n                if (userAuthorization !== undefined) {\n                    requestParams.headers[StandardHeaders.UserAuthorizationHeader] = [\n                        userAuthorization\n                    ]\n                }\n\n                if (this.applicationId !== undefined) {\n                    requestParams.headers[StandardHeaders.ApplicationIdHeader] = [\n                        this.applicationId\n                    ]\n                }\n            }\n        }\n    }\n}\n","type Promsified<T> = { [P in keyof T]: Promise<T[P]> }\n\nexport enum FetchMode {\n    Lazy,\n    Eager\n}\n\nexport abstract class MitterObject<T extends Promsified<U>, U> {\n    protected _ref: U | undefined\n    private fetchCall: (() => Promise<U>) | undefined\n    private mode: FetchMode = FetchMode.Lazy\n\n    protected init(fetchCall: () => Promise<U>, mode: FetchMode = FetchMode.Lazy) {\n        this.fetchCall = fetchCall\n        this.mode = mode\n\n        if (mode === FetchMode.Eager) {\n            fetchCall().then(ref => {\n                this._ref = ref\n            })\n        }\n    }\n\n    public sync(): Promise<U> {\n        return this.fetchCall!().then(it => {\n            this.setRef(it)\n            return it\n        })\n    }\n\n    public setRef(ref: U) {\n        this._ref = ref\n    }\n\n    protected proxy<K extends keyof U>(key: K): Promise<U[K]> {\n        if (this._ref !== undefined) {\n            return Promise.resolve(this._ref[key])\n        } else {\n            return (\n                this.sync()\n                    // TODO. we probably need some deadlock prevention mechanism, this can ideally\n                    // keep on going on forever\n                    .then(it => {\n                        this._ref = it\n                        return this._ref[key]\n                    })\n            )\n        }\n    }\n}\n","import { Mitter } from '../Mitter'\nimport { usersClientGenerator, channelsClientGenerator } from '../services'\nimport { TypedAxiosInstance } from 'restyped-axios'\nimport { UsersApi, ChannelsApi } from '../services'\nimport { User, UserLocator } from '@mitter-io/models'\nimport { MitterObject } from './mitter-objects'\n\nexport default class MitterUser extends MitterObject<MitterUser, User> {\n    get userId(): Promise<string> {\n        return super.proxy('userId')\n    }\n\n    get systemUser(): Promise<boolean> {\n        return super.proxy('systemUser')\n    }\n\n    get synthetic(): Promise<boolean> {\n        return super.proxy('synthetic')\n    }\n\n    get screenName(): Promise<{ screenName: string }> {\n        return super.proxy('screenName')\n    }\n\n    get identifier(): Promise<() => string> {\n        return super.proxy('identifier')\n    }\n\n    get userLocators(): Promise<UserLocator[]> {\n        return super.proxy('userLocators')\n    }\n\n    private readonly _userId: string\n    private readonly usersClient: TypedAxiosInstance<UsersApi>\n    private readonly channelsClient: TypedAxiosInstance<ChannelsApi>\n\n    constructor(private readonly mitter: Mitter, userId: string | undefined = undefined) {\n        super()\n\n        if (userId === undefined) {\n            this._userId = 'me'\n        } else {\n            this._userId = userId\n        }\n\n        this.usersClient = usersClientGenerator(this.mitter)\n        this.channelsClient = channelsClientGenerator(this.mitter)\n\n        super.init(() => {\n            return this.usersClient\n                .get<'/v1/users/:userId'>(`/v1/users/${this._userId}`)\n                .then(x => x.data)\n        })\n    }\n\n    channels() {\n        this.channelsClient\n            .get<'/v1/users/:userId/channels'>(`/v1/users/${this._userId}/channels`)\n            .then(x => x.data)\n    }\n}\n","import { KvStore } from './mitter-core'\nimport { MitterAxiosApiInterceptor } from './MitterApiGateway'\nimport { MitterClientSet } from './MitterClientSet'\nimport { Identifiable } from './models/base-types'\nimport MessagingPipelineDriver from './specs/MessagingPipelineDriver'\nimport { MessagingPipelineDriverHost } from './driver-host/MessagingPipelineDriverHost'\nimport { MessagingPipelinePayload, User } from '@mitter-io/models'\nimport { MitterConstants } from './services/constants'\nimport { UserAuthorizationInterceptor } from './auth/user-interceptors'\nimport MitterUser from './objects/Users'\n\nimport { AxiosInstance } from 'axios'\nimport { statefulPromise } from './utils'\n\nexport interface MitterAxiosInterceptionHost {\n    mitterApiBaseUrl: string\n    enableAxiosInterceptor(axiosInstance: AxiosInstance): void\n    disableAxiosInterceptor?(axiosInstance: AxiosInstance): void\n}\n\nexport abstract class MitterBase implements MitterAxiosInterceptionHost {\n    abstract mitterApiBaseUrl: string\n    abstract enableAxiosInterceptor(axiosInstance: AxiosInstance): void\n\n    version(): string {\n        return '0.5.0'\n    }\n\n    clients(): MitterClientSet {\n        return new MitterClientSet(this)\n    }\n}\n\nexport class Mitter extends MitterBase implements MitterAxiosInterceptionHost {\n    // tslint:disable-next-line:variable-name\n    private static readonly StoreKey = {\n        UserAuthorizationToken: 'userAuthorizationToken',\n        UserId: 'userId'\n    }\n    private cachedUserAuthorization: string | undefined = undefined\n    private cachedUserId: string | undefined = undefined\n\n    private mitterAxiosInterceptor: MitterAxiosApiInterceptor = new MitterAxiosApiInterceptor(\n        /* the application if */\n        this.applicationId,\n\n        /* The generic request interceptor to use */\n        new UserAuthorizationInterceptor(\n            () => this.cachedUserAuthorization,\n            this.applicationId\n        ).getInterceptor(),\n\n        /* The base url for mitter apis */\n        this.mitterApiBaseUrl\n    )\n\n    private messagingPipelineDriverHost: MessagingPipelineDriverHost\n    private subscriptions: ((payload: MessagingPipelinePayload) => void)[] = []\n    private onAuthAvailableSubscribers: (() => void)[] = []\n    private onPipelinesInitialized = statefulPromise<void>()\n\n    constructor(\n        public readonly kvStore: KvStore,\n        public readonly applicationId: string | undefined,\n        public readonly mitterApiBaseUrl: string = MitterConstants.MitterApiUrl,\n        private onTokenExpireFunctions: (() => void)[],\n        mitterInstanceReady: () => void,\n        pipelineDrivers: MessagingPipelineDriver[] | MessagingPipelineDriver,\n        globalHostObject: any\n    ) {\n        super()\n\n        this.messagingPipelineDriverHost = new MessagingPipelineDriverHost(\n            pipelineDrivers,\n            this,\n            kvStore,\n            (e?: any) => {\n                if (e !== undefined) {\n                    this.onPipelinesInitialized.reject(e)\n                } else {\n                    this.onPipelinesInitialized.resolve()\n                }\n            }\n        )\n\n        this.messagingPipelineDriverHost.subscribe((messagingPayload: any) =>\n            this.subscriptions.forEach(subscription => subscription(messagingPayload))\n        )\n\n        globalHostObject._mitter_context = this\n    }\n\n    userAuthorizationAvailable(onAuthAvailable: () => void) {\n        this.onAuthAvailableSubscribers.push(onAuthAvailable)\n    }\n\n    subscribeToPayload(subscription: (payload: MessagingPipelinePayload) => void) {\n        this.subscriptions.push(subscription)\n    }\n\n    enableAxiosInterceptor(axiosInstance: AxiosInstance) {\n        this.mitterAxiosInterceptor.enable(axiosInstance)\n    }\n\n    disableAxiosInterceptor(axiosInstance: AxiosInstance) {\n        this.mitterAxiosInterceptor.disable(axiosInstance)\n    }\n\n    setUserAuthorization(authorizationToken: string) {\n        if (authorizationToken.split('.').length === 3) {\n            this.cachedUserId = JSON.parse(atob(authorizationToken.split('.')[1]))['userId']\n        }\n\n        if (this.cachedUserAuthorization === authorizationToken) {\n            return\n        }\n\n        this.cachedUserAuthorization = authorizationToken\n        this.announceAuthorizationAvailable()\n        this.kvStore\n            .setItem(Mitter.StoreKey.UserAuthorizationToken, authorizationToken)\n            .catch((err: any) => {\n                throw new Error(`Error storing key ${err}`)\n            })\n    }\n\n    getUserAuthorization(): Promise<string | undefined> {\n        if (this.cachedUserAuthorization !== undefined) {\n            return Promise.resolve(this.cachedUserAuthorization)\n        } else {\n            return this.kvStore.getItem(Mitter.StoreKey.UserAuthorizationToken)\n        }\n    }\n\n    setUserId(userId: string): Promise<void> {\n        if (this.cachedUserId === userId) return Promise.resolve()\n\n        return this.kvStore.setItem(Mitter.StoreKey.UserId, userId).catch((err: any) => {\n            throw new Error(`Error storing userId ${err}`)\n        })\n    }\n\n    getUserId(): Promise<string> {\n        if (this.cachedUserId !== undefined) {\n            return Promise.resolve(this.cachedUserId)\n        } else {\n            return this.kvStore.getItem<string>(Mitter.StoreKey.UserId).then(userId => {\n                if (userId === undefined) {\n                    return this._me().userId.then(fetchedUserId => {\n                        return this.setUserId(fetchedUserId).then(() => fetchedUserId)\n                    })\n                } else {\n                    return Promise.resolve(userId)\n                }\n            })\n        }\n    }\n\n    onPipelinesInit(): Promise<void> {\n        return this.onPipelinesInitialized\n    }\n\n    // Smart-object values\n\n    me(): Identifiable<User> {\n        return {\n            identifier: this.cachedUserId!!\n        }\n    }\n\n    private _me(): MitterUser {\n        return new MitterUser(this)\n    }\n\n    private executeOnTokenExpireFunctions() {\n        this.onTokenExpireFunctions.forEach(onTokenExpire => {\n            onTokenExpire()\n        })\n    }\n\n    private announceAuthorizationAvailable() {\n        this.onAuthAvailableSubscribers.forEach(subscriber => subscriber())\n    }\n}\n","import { DeliveryEndpoint, MessagingPipelinePayload } from '@mitter-io/models'\nimport { Mitter } from './../mitter-core'\n\nexport interface PipelineDriverSpec {\n    name: string\n}\n\nexport enum PipelineStatus {\n    Connected,\n    Unavailable,\n    Disrupted,\n    ConnectionInProgress\n}\n\nexport interface PipelineDriverInitialization {\n    pipelineDriverSpec: PipelineDriverSpec\n    initialized: Promise<void | boolean>\n}\n\nexport interface BasePipelineSink {\n    received(payload: MessagingPipelinePayload): void\n}\n\nexport interface PipelineSink extends BasePipelineSink {\n    endpointInvalidated(deliveryEndpoint: DeliveryEndpoint): void\n    authorizedUserUnavailable(): void\n    statusUpdate(newStatus: PipelineStatus): void\n}\n\nexport default interface MessagingPipelineDriver {\n    initialize(mitter: Mitter): PipelineDriverInitialization\n\n    getDeliveryEndpoint(): Promise<DeliveryEndpoint | undefined>\n\n    endpointRegistered(pipelineSink: PipelineSink, userDeliveryEndpoint: DeliveryEndpoint): void\n\n    pipelineSinkChanged?(pipelineSink: BasePipelineSink): void\n\n    halt(): void\n}\n","import {\n    NewMessagePayload,\n    NewChannelTimelineEventPayload,\n    ParticipationChangedEventPayload,\n    NewChannelPayload,\n    NewMessageTimelineEventPayload\n} from '@mitter-io/models'\n\nfunction generatePipelinePayloadMatcher<T>(payloadType: string): (input: any) => input is T {\n    return (input: any): input is T => {\n        return input['@type'] !== undefined && input['@type'] === payloadType\n    }\n}\n\nexport const isNewMessagePayload = generatePipelinePayloadMatcher<NewMessagePayload>(\n    'new-message-payload'\n)\nexport const isNewChannelPayload = generatePipelinePayloadMatcher<NewChannelPayload>(\n    'new-channel-payload'\n)\n\nexport const isNewMessageTimelineEventPayload = generatePipelinePayloadMatcher<\n    NewMessageTimelineEventPayload\n>('new-message-timeline-event-payload')\nexport const isNewChannelTimelineEventPayload = generatePipelinePayloadMatcher<\n    NewChannelTimelineEventPayload\n>('new-channel-timeline-event-payload')\n\nexport const isParticipantChangedEventPayload = generatePipelinePayloadMatcher<\n    ParticipationChangedEventPayload\n>('participant-changed-event-payload')\n\nexport const isChannelStreamData = generatePipelinePayloadMatcher('stream-data')\n\nexport const isPipelineControlPayload = generatePipelinePayloadMatcher('pipeline-control-payload')\n"],"names":["axios_1","axios","base","tslib_1.__extends","PipelineStatus"],"mappings":"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"}